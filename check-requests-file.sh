#!/bin/bash

echo "üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–∞ requests/page.tsx..."
echo ""

FILE="app/(dashboard)/requests/page.tsx"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ 1: –§–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç?
if [ ! -f "$FILE" ]; then
    echo "‚ùå –û–®–ò–ë–ö–ê: –§–∞–π–ª $FILE –Ω–µ –Ω–∞–π–¥–µ–Ω!"
    exit 1
fi

echo "‚úÖ –§–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç"
echo ""

# –ü—Ä–æ–≤–µ—Ä–∫–∞ 2: –ï—Å—Ç—å –ª–∏ —Ç–∏–ø 'swap'?
echo "–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ RequestType..."
if grep -q "type RequestType = '.*swap" "$FILE"; then
    echo "‚úÖ –¢–∏–ø 'swap' –¥–æ–±–∞–≤–ª–µ–Ω –≤ RequestType"
else
    echo "‚ùå –û–®–ò–ë–ö–ê: –¢–∏–ø 'swap' –ù–ï –Ω–∞–π–¥–µ–Ω –≤ RequestType"
    echo "–¢–µ–∫—É—â–∞—è —Å—Ç—Ä–æ–∫–∞:"
    grep "type RequestType" "$FILE"
    exit 1
fi
echo ""

# –ü—Ä–æ–≤–µ—Ä–∫–∞ 3: –ï—Å—Ç—å –ª–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å SwapRequest?
echo "–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ SwapRequest..."
if grep -q "interface SwapRequest" "$FILE"; then
    echo "‚úÖ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å SwapRequest –Ω–∞–π–¥–µ–Ω"
else
    echo "‚ùå –û–®–ò–ë–ö–ê: –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å SwapRequest –ù–ï –Ω–∞–π–¥–µ–Ω"
    exit 1
fi
echo ""

# –ü—Ä–æ–≤–µ—Ä–∫–∞ 4: –ï—Å—Ç—å –ª–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ swapRequests?
echo "–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è swapRequests..."
if grep -q "swapRequests.*useState.*SwapRequest" "$FILE"; then
    echo "‚úÖ –°–æ—Å—Ç–æ—è–Ω–∏–µ swapRequests –Ω–∞–π–¥–µ–Ω"
else
    echo "‚ùå –û–®–ò–ë–ö–ê: –°–æ—Å—Ç–æ—è–Ω–∏–µ swapRequests –ù–ï –Ω–∞–π–¥–µ–Ω–æ"
    exit 1
fi
echo ""

# –ü—Ä–æ–≤–µ—Ä–∫–∞ 5: –ó–∞–≥—Ä—É–∑–∫–∞ swap requests?
echo "–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ swap requests..."
if grep -q "/api/schedule-swap?status=PENDING" "$FILE"; then
    echo "‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ swap requests –Ω–∞–π–¥–µ–Ω–∞"
else
    echo "‚ùå –û–®–ò–ë–ö–ê: –ó–∞–≥—Ä—É–∑–∫–∞ swap requests –ù–ï –Ω–∞–π–¥–µ–Ω–∞"
    exit 1
fi
echo ""

# –ü—Ä–æ–≤–µ—Ä–∫–∞ 6: –í–∫–ª–∞–¥–∫–∞ "–û–±–º–µ–Ω—ã"?
echo "–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∫–ª–∞–¥–∫–∏ –û–±–º–µ–Ω—ã..."
if grep -q "activeTab === 'swap'" "$FILE"; then
    echo "‚úÖ –í–∫–ª–∞–¥–∫–∞ swap –Ω–∞–π–¥–µ–Ω–∞"
    
    # –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç—Ä–æ–∫—É —Å –≤–∫–ª–∞–¥–∫–æ–π
    echo ""
    echo "–ù–∞–π–¥–µ–Ω–Ω–∞—è –≤–∫–ª–∞–¥–∫–∞:"
    grep -A 5 "onClick.*setActiveTab.*swap" "$FILE" | head -10
else
    echo "‚ùå –û–®–ò–ë–ö–ê: –í–∫–ª–∞–¥–∫–∞ swap –ù–ï –Ω–∞–π–¥–µ–Ω–∞"
    exit 1
fi
echo ""

# –ü—Ä–æ–≤–µ—Ä–∫–∞ 7: –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∫–∞—Ä—Ç–æ—á–µ–∫ swap?
echo "–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –∫–∞—Ä—Ç–æ—á–µ–∫ –æ–±–º–µ–Ω–∞..."
if grep -q "filtered.swap.*map.*SwapRequest" "$FILE"; then
    echo "‚úÖ –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ swap –∫–∞—Ä—Ç–æ—á–µ–∫ –Ω–∞–π–¥–µ–Ω"
else
    echo "‚ùå –û–®–ò–ë–ö–ê: –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ swap –∫–∞—Ä—Ç–æ—á–µ–∫ –ù–ï –Ω–∞–π–¥–µ–Ω"
    exit 1
fi
echo ""

# –ü—Ä–æ–≤–µ—Ä–∫–∞ 8: –û–±—Ä–∞–±–æ—Ç—á–∏–∫ handleSwapAction?
echo "–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ handleSwapAction..."
if grep -q "handleSwapAction" "$FILE"; then
    echo "‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ handleSwapAction –Ω–∞–π–¥–µ–Ω"
else
    echo "‚ùå –û–®–ò–ë–ö–ê: –û–±—Ä–∞–±–æ—Ç—á–∏–∫ handleSwapAction –ù–ï –Ω–∞–π–¥–µ–Ω"
    exit 1
fi
echo ""

echo "================================================"
echo "‚úÖ –í–°–ï –ü–†–û–í–ï–†–ö–ò –ü–†–û–ô–î–ï–ù–´!"
echo "================================================"
echo ""
echo "–§–∞–π–ª $FILE —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è."
echo ""
echo "–ï—Å–ª–∏ –≤–∫–ª–∞–¥–∫–∞ –≤—Å–µ –µ—â–µ –Ω–µ –≤–∏–¥–Ω–∞:"
echo "1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä (Ctrl+C)"
echo "2. –£–¥–∞–ª–∏—Ç–µ –∫—ç—à: rm -rf .next"
echo "3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ: npm run dev"
echo ""
echo "–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è:"
echo "- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤—ã –≤–æ—à–ª–∏ –∫–∞–∫ ADMIN"
echo "- –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫"
echo "- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∂–µ—Å—Ç–∫—É—é –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫—É (Ctrl+Shift+R)"
